plugins {
    id 'java'
}

def cppBuildDir = project(":cpp").buildDir

jar {
    dependsOn(":cpp:compileLinuxSgxSimulation")
    def ldBuildDir = "$cppBuildDir/Simulation/linux-sgx/src/linux-sgx/external/toolset/ubuntu18.04/ld"
    def cygwinDir = "$cppBuildDir/../cygwin"
    into "com/r3/conclave/binutils", {
        from(ldBuildDir) {
            include "ld"
        }
        from(cygwinDir) {
           include "*.dll"
           include "ld.exe"
           include "ldscripts/*"
        }
    }
}
