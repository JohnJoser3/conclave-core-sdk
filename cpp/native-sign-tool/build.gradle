plugins {
    id 'java'
}

def cppBuildDir = project(":cpp").buildDir

jar {
    dependsOn(":cpp:compileLinuxSgxRelease")
    def signToolBuildDir = "$cppBuildDir/Release/linux-sgx/src/linux-sgx/build/linux"
    def cygwinDir = "$cppBuildDir/../cygwin"
    into "com/r3/conclave/sign-tool", {
        from(signToolBuildDir) {
            include "sgx_sign"
        }
        from(cygwinDir) {
            include "*.dll"
            include "sgx_sign.exe"
        }
    }
}
