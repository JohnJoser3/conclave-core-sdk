plugins {
    id 'org.jetbrains.kotlin.jvm'
    id 'com.r3.conclave.enclave'
}

// This test project is copied into a junit temp directory in the build directory before it's built, which is why
// these relevant paths seem to not line up.
apply from: '../../../../versions.gradle'

repositories {
    maven {
        url = "${rootProject.projectDir}/../../../../build/repo"
    }

    maven {
        url = "https://software.r3.com/artifactory/conclave-maven"
    }

    mavenCentral()
}

compileKotlin {
    kotlinOptions {
        jvmTarget = '1.8'
    }
}

conclave {
    productID = 1
    revocationLevel = 0
    // These numbers need to stay in this format as they are used
    //   to test that a minimal change to them causes a rebuild of the enclave
    maxHeapSize = "268435456"
    maxStackSize = "2097152"
    reflectionConfigurationFiles.from("reflectionconfig.json")
    serializationConfigurationFiles.from("serializationconfig.json")
}
