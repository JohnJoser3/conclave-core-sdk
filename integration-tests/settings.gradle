pluginManagement {
    apply from: '../versions.gradle'

    repositories {
        gradlePluginPortal()
        mavenCentral()
        switch (System.getenv('USE_MAVEN_REPO')?.toLowerCase()) {
            case "artifactory":
                maven {
                    url = "https://software.r3.com/artifactory/sgxjvm"
                    credentials {
                        username = System.getenv('OBLIVIUM_MAVEN_USERNAME')
                        password = System.getenv('OBLIVIUM_MAVEN_PASSWORD')
                    }
                }
                break
            default:
                maven {
                    url = "${rootProject.projectDir}/../build/distributions/conclave-sdk-$conclave_version/repo"
                }
                break
        }
    }

    plugins {
        id 'org.jetbrains.kotlin.jvm' version kotlin_version apply false
        id 'org.jetbrains.kotlin.plugin.serialization' version kotlin_version apply false
        id 'com.r3.conclave.enclave' version conclave_version apply false
        id 'com.google.protobuf' version protobuf_plugin_version apply false
    }
}

include 'shading-tests'
include ':kotlin-enclave:enclave'
include ':kotlin-enclave:host'
include ':filesystem:common'
include ':filesystem:enclave'
include ':filesystem:host'
include ':general:common'
include ':general:enclave_secret_key'
include ':general:enclave_secret_key_2'
include ':general:enclave_sealunseal_abstract'
include ':general:enclave_sealunseal'
include ':general:enclave_sealunseal_same_signer'
include ':general:enclave_sealunseal_different_signer'
include ':general:enclave_threadsafe_false'
include ':general:enclave_threadsafe_true'
include ':general:enclave_with_mail'
include ':general:enclave_with_postoffice'
include ':general:tests'
include ':substratevm-jni:common'
include ':substratevm-jni:enclave'
include ':substratevm-jni:host'
include ':tribuo:client'
include ':tribuo:common'
include ':tribuo:enclave'
include ':tribuo:host'
